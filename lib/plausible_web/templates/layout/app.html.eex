<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" type="image/png" sizes="32x32" href="<%= PlausibleWeb.Router.Helpers.static_path(@conn, "/images/icon/32x32.png") %>">
    <link rel="icon" type="image/png" sizes="16x16" href="<%= PlausibleWeb.Router.Helpers.static_path(@conn, "/images/icon/16x16.png") %>">
    <title><%= assigns[:title] || "Plausible · Web analytics" %></title>
    <link rel="stylesheet" href="<%= Routes.static_path(@conn, "/css/app.css") %>"/>
    <script>
    window['_fs_debug'] = false;
    window['_fs_host'] = 'fullstory.com';
    window['_fs_org'] = 'FJFV1';
    window['_fs_namespace'] = 'FS';
    (function(m,n,e,t,l,o,g,y){
        if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
        g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];
        o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
        y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
        g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};
        g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
        g.consent=function(a){g("consent",!arguments.length||a)};
        g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
        g.clearUserCookie=function(){};
    })(window,document,window['_fs_namespace'],'script','user');
    </script>
    <script async type="text/javascript" src="https://plausible.io/js/analytics.js"></script>
  </head>
  <body class="flex flex-col h-full bg-grey-lightest">
    <div class="<%= if !@conn.assigns[:landing_nav] do "border-b border-grey-light bg-white" end %>">
      <nav class="mx-auto container flex items-center justify-between flex-wrap py-6">
        <div class="flex items-center flex-no-shrink text-white">
          <%= img_tag(PlausibleWeb.Router.Helpers.static_path(@conn, "/images/icon/48x48.png"), style: "height: 28px; margin-right: 6px;") %>
          <a href="/" class="logo-text">Plausible</a>
        </div>
        <%= cond do %>
          <% Plug.Conn.get_session(@conn, :current_user_email) -> %>
            <ul class="list-reset flex">
              <li class="mr-6">
               <%= link("My sites", to: "/") %>
              </li>
              <li class="mr-6">
               <%= button("Logout", to: "/logout", method: :post) %>
              </li>
            </ul>
          <% true -> %>
            <ul class="list-reset flex">
              <li class="mr-6">
               <%= link("Login", to: "/login", class: "text-indigo font-bold text-sm py-2", style: "line-height: 33px;") %>
              </li>
              <li class="mr-6">
               <%= link("Sign up free", to: "/onboarding", class: "button button-outline py-2 px-4 text-sm") %>
              </li>
            </ul>
        <% end %>
      </nav>
    </div>
    <main class="flex-1">
      <%= render @view_module, @view_template, assigns %>
    </main>
    <footer class='w-full text-center text-grey text-sm p-8 pin-b pt-20'>
      <p>
      Made with ❤️by <a href="https://twitter.com/ukutaht" class="text-grey-darker">@ukutaht</a> in London, UK •
      ©2019 Plausible Insights. All rights reserved.
      </p>
    </footer>
    <script type="text/javascript" src="<%= Routes.static_path(@conn, "/js/app.js") %>"></script>
  </body>
</html>
